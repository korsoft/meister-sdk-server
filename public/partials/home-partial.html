<div ng-cloak >

<main-menu></main-menu>
<main-toolbar></main-toolbar>

    <md-content ng-init="init()" >
    <div flex-xs flex-gt-xs="100" layout="column">

    <md-card md-theme-watch>
        <md-card-title style="padding:5px 5px 5px">
          <md-card-title-text>
            <span class="md-headline"  style="font-size: 18px">SAP Gateway {{gatewaySelected.name ? ': ' + gatewaySelected.name : ''}}</span>
          </md-card-title-text>
          <md-card-title-media>
            <div class="md-media-xs card-media"></div>
          </md-card-title-media>
           <md-actions>
              <md-button  aria-label="Refresh" 
                      title="{{show_select_gateway === true ? 'Hide' : 'Show'}}" 
                      ng-click="show_select_gateway = !show_select_gateway" 
                      style="padding: 0px; margin: 0px; width: 22px">
                     {{show_select_gateway === true ? 'Hide' : 'Show'}}
                  </md-button>
          </md-actions>
        </md-card-title>
        <md-card-content ng-show="show_select_gateway">
          <md-select ng-model="gatewaySelectedId" placeholder="Select the Gateway" style="width:80%" ng-change="changeGateway(gatewaySelectedId)">
             <md-option ng-repeat="g in gateways" ng-value="g.id">
                  {{g.name}} --> {{g.client.name}}
              </md-option>
        </md-select>
        
        </md-card-content>
      </md-card>

    </div>

<div layout="row" layout-xs="column" layout-wrap>
   
       <md-card  flex ng-if="gatewaySelected!=null">
        <md-card-title style="-webkit-flex:none">
          <md-card-title-text>
            <div layout="row">
                <span class="md-headline">{{gatewaySelected.name}}</span>
            </div>
          </md-card-title-text>
        <md-actions>
            <md-button class="md-icon-button" aria-label="Refresh" title="Refresh"
                      ng-click="changeGateway(gatewaySelectedId)" style="padding: 0px; margin: 0px; width: 22px">
                     <md-icon ng-bind="'cached'"></md-icon>
                  </md-button>
                  <md-button class="md-icon-button" aria-label="Refresh" 
                      title="Add Module" 
                      ng-if="nodeSelected && nodeSelected.source.MODULES"
                      ng-click="addModule($event, nodeSelected)" 
                      style="padding: 0px; margin: 0px; width: 22px">
                     <md-icon ng-bind="'note_add'"></md-icon>
                  </md-button>
                  <md-button class="md-icon-button" aria-label="Refresh" 
                      title="Add Endpoint" 
                      ng-if="nodeSelected && nodeSelected.source.ENDPOINTS"
                      ng-click="addEndpoint($event, nodeSelected)" 
                      style="padding: 0px; margin: 0px; width: 22px">
                     <md-icon ng-bind="'note_add'"></md-icon>
                  </md-button>
                  <md-button class="md-icon-button" aria-label="Refresh" 
                      title="Add Style" 
                      ng-if="nodeSelected && nodeSelected.source.STYLES"
                      ng-click="addStyle($event, nodeSelected)" 
                      style="padding: 0px; margin: 0px; width: 22px">
                     <md-icon ng-bind="'note_add'"></md-icon>
                  </md-button>
        </md-actions>
        </md-card-title>
       <md-card-content style="height: 400px; overflow-y: auto" ng-if="!loading_tree">
        <tree nodes='basicTree' options='treeOptions' ></tree>
       </md-card-content>
      </md-card>
   


      <md-card  flex ng-if="gatewaySelected!=null" >
        <md-card-title style="-webkit-flex:none">
          <md-card-title-text>
            <span class="md-headline">Properties</span>
          </md-card-title-text>
         
        </md-card-title>
        <md-card-content style="height: 400px; overflow-y: auto" >
           <table md-table style="table-layout: fixed">
                    <thead md-head>
                      <tr md-row >
                          <th md-column style="width: 35%">Property</th>
                          <th md-column style="width: 50%">Value</th>
                          <th md-column style="width: 15%"></th>
                      </tr>
                    </thead>
                    <tbody md-body>
                      <tr md-row class="with-hover" ng-repeat="(key, value) in nodeSelected.source">
                        <td md-cell style="text-overflow:ellipsis;overflow:hidden;padding:0px"><span title="{{key}}">{{key}}</span></td>
                        <td md-cell style="text-overflow:ellipsis;overflow:hidden;padding:0px"><span ng-if="!nodeSelected.source[key+$index].$edit" title="{{isArray(value) ? '(Collection)' : value}}">{{isArray(value) ? '(Collection)' : value}}</span>
                          <md-input-container class="md-block" ng-if="nodeSelected.source[key+$index].$edit">
                            <label>{{key}}</label>
                          <input type="text" ng-model="nodeSelected.source[key]" >
                        </md-input-container>

                        </td>
                        <td md-cell style="padding: 0px">
                          <!--
                            <md-button class="md-icon-button" title="Edit" ng-click="nodeSelected.source[key+$index].$edit=true" ng-if="!nodeSelected.source[key+$index].$edit" style="padding: 0px; margin: 0px; width: 22px">
                               <md-icon ng-bind="'create'"></md-icon>
                            </md-button>
                            <md-button class="md-icon-button" title="Save" ng-click="nodeSelected.source[key+$index].$edit=false" ng-if="nodeSelected.source[key+$index].$edit" style="padding: 0px; margin: 0px;width: 22px">
                               <md-icon ng-bind="'done'"></md-icon>
                            </md-button>
                            <md-button class="md-icon-button" title="Cancel" ng-click="nodeSelected.source[key+$index].$edit=false" ng-if="nodeSelected.source[key+$index].$edit" style="padding: 0px; margin: 0px;width: 22px">
                               <md-icon ng-bind="'clear'"></md-icon>
                            </md-button>
                            -->
                        </td>
                      </tr>
                    </tbody>
                </table>
        </md-card-content>
      </md-card>

   </div>
 </md-content>
</div>